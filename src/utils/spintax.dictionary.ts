// src/utils/spintax.helper.ts (–ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞)

export const variationsDictionary: { [key: string]: string } = {
  // --- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è ---
  –ü—Ä–∏–≤–µ—Ç: '{–ü—Ä–∏–≤–µ—Ç|–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ|–î–æ–±—Ä—ã–π –¥–µ–Ω—å}',
  –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ: '{–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ|–î–æ–±—Ä—ã–π –¥–µ–Ω—å|–î–æ–±—Ä–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫}',
  '–î–æ–±—Ä—ã–π –¥–µ–Ω—å': '{–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ|–î–æ–±—Ä—ã–π –¥–µ–Ω—å}',

  // --- –û–±—Ä–∞—â–µ–Ω–∏—è ---
  —É–≤–∞–∂–∞–µ–º—ã–π: '{—É–≤–∞–∂–∞–µ–º—ã–π|–¥–æ—Ä–æ–≥–æ–π}',
  –¥–æ—Ä–æ–≥–æ–π: '{—É–≤–∞–∂–∞–µ–º—ã–π|–¥–æ—Ä–æ–≥–æ–π|—Ü–µ–Ω–Ω—ã–π}',

  // --- –°–æ–±—ã—Ç–∏—è/–î–µ–π—Å—Ç–≤–∏—è ---
  –ê–∫—Ü–∏—è: '{–ê–∫—Ü–∏—è|–°–ø–µ—Ü–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ|–†–∞—Å–ø—Ä–æ–¥–∞–∂–∞|–í—ã–≥–æ–¥–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ}',
  –°–ø–µ—Ü–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: '{–ê–∫—Ü–∏—è|–°–ø–µ—Ü–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ|–†–∞—Å–ø—Ä–æ–¥–∞–∂–∞|–í—ã–≥–æ–¥–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ}',
  –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏: '{–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏|—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–∏|–ø–æ–∫—É–ø–∫–µ}',
  –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å: '{–∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å|—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å|–∫—É–ø–∏—Ç—å|–ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏}',
  '–ü—Ä–∏—ë–º –∑–∞—è–≤–æ–∫': '{–ü—Ä–∏—ë–º –∑–∞—è–≤–æ–∫|–°–±–æ—Ä –∑–∞—è–≤–æ–∫|–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è|–ò–¥—ë—Ç –Ω–∞–±–æ—Ä}',
  '–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –ø—Ä–∏—ë–º –∑–∞—è–≤–æ–∫':
    '{–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –ø—Ä–∏—ë–º –∑–∞—è–≤–æ–∫|–ò–¥—ë—Ç —Å–±–æ—Ä –∑–∞—è–≤–æ–∫|–û—Ç–∫—Ä—ã—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è|–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –Ω–∞–±–æ—Ä}',
  '–ü—Ä–æ–¥–ª—ë–Ω –ø—Ä–∏—ë–º –∑–∞—è–≤–æ–∫':
    '{–ü—Ä–æ–¥–ª—ë–Ω –ø—Ä–∏—ë–º –∑–∞—è–≤–æ–∫|–°—Ä–æ–∫ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –ø—Ä–æ–¥–ª—ë–Ω|–ï—â—ë –µ—Å—Ç—å –≤—Ä–µ–º—è –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É}',
  —Å–æ—Å—Ç–æ–∏—Ç—Å—è: '{—Å–æ—Å—Ç–æ–∏—Ç—Å—è|–ø—Ä–æ–π–¥—ë—Ç|–±—É–¥–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å}',
  –ù–∞–ø–æ–º–∏–Ω–∞–µ–º: '{–ù–∞–ø–æ–º–∏–Ω–∞–µ–º|–ù–µ –∑–∞–±—É–¥—å—Ç–µ|–ü–æ–º–Ω–∏—Ç–µ|–•–æ—Ç–∏–º –Ω–∞–ø–æ–º–Ω–∏—Ç—å}',

  // --- –ú–µ—Å—Ç–∞/–û–±—ä–µ–∫—Ç—ã ---
  —Å—Ç–æ–∏–º–æ—Å—Ç—å: '{—Å—Ç–æ–∏–º–æ—Å—Ç—å|—Ü–µ–Ω–∞}',
  —Ü–µ–Ω–∞: '{—Å—Ç–æ–∏–º–æ—Å—Ç—å|—Ü–µ–Ω–∞}',
  –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è: '{–ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è|—Ä–∞–∑–º–µ—â–µ–Ω–∏—è|–ø—Ä–µ–±—ã–≤–∞–Ω–∏—è}',
  –û—Ç–µ–ª—å: '{–û—Ç–µ–ª—å|–ì–æ—Å—Ç–∏–Ω–∏—Ü–∞}',
  –ì–æ—Å—Ç–∏–Ω–∏—Ü–∞: '{–û—Ç–µ–ª—å|–ì–æ—Å—Ç–∏–Ω–∏—Ü–∞}',
  –æ—Ç–µ–ª–∏: '{–æ—Ç–µ–ª–∏|–≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–º–µ—â–µ–Ω–∏—è|–Ω–æ–º–µ—Ä–∞ –≤ –≥–æ—Å—Ç–∏–Ω–∏—Ü–∞—Ö|–ª—É—á—à–∏–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã}',
  –Ω–æ–º–µ—Ä–∞: '{–Ω–æ–º–µ—Ä–∞|–∫–æ–º–Ω–∞—Ç—ã|–∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã}',
  –ü–∞–∫–µ—Ç: '{–ü–∞–∫–µ—Ç|–í–∞—Ä–∏–∞–Ω—Ç|–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ}',

  // --- –î–µ—Ç–∞–ª–∏ ---
  '–æ–±–µ–¥–æ–≤ –∏–ª–∏ —É–∂–∏–Ω–æ–≤':
    '{–æ–±–µ–¥–æ–≤ –∏–ª–∏ —É–∂–∏–Ω–æ–≤|–ø–æ–ª–Ω–æ–≥–æ –ø–∞–Ω—Å–∏–æ–Ω–∞|–ø–æ–ª—É–ø–∞–Ω—Å–∏–æ–Ω–∞|–ø–∏—Ç–∞–Ω–∏—è}',
  –º–µ–Ω–µ–¥–∂–µ—Ä–∞: '{–º–µ–Ω–µ–¥–∂–µ—Ä–∞|—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞|–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞|–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞}',
  –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è: '{–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è|–ø–æ —ç—Ç–æ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é}',
  —Ñ–µ—Å—Ç–∏–≤–∞–ª—å: '{—Ñ–µ—Å—Ç–∏–≤–∞–ª—å|–∫–æ–Ω–∫—É—Ä—Å|—Ñ–µ—Å—Ç–∏–≤–∞–ª—å-–∫–æ–Ω–∫—É—Ä—Å|–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ}',
  –∫–æ–Ω–∫—É—Ä—Å: '{—Ñ–µ—Å—Ç–∏–≤–∞–ª—å|–∫–æ–Ω–∫—É—Ä—Å|—Ñ–µ—Å—Ç–∏–≤–∞–ª—å-–∫–æ–Ω–∫—É—Ä—Å|—Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ}',
  '—Ñ–µ—Å—Ç–∏–≤–∞–ª—å-–∫–æ–Ω–∫—É—Ä—Å': '{—Ñ–µ—Å—Ç–∏–≤–∞–ª—å|–∫–æ–Ω–∫—É—Ä—Å|—Ñ–µ—Å—Ç–∏–≤–∞–ª—å-–∫–æ–Ω–∫—É—Ä—Å}',
  —Å—Ä–æ–∫: '{—Å—Ä–æ–∫|–¥–µ–¥–ª–∞–π–Ω|–∫—Ä–∞–π–Ω–∏–π —Å—Ä–æ–∫}',
  –∑–∞—è–≤–æ–∫: '{–∑–∞—è–≤–æ–∫|—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π|–∞–Ω–∫–µ—Ç}',
  –≤—Ö–æ–¥–∏—Ç: '{–≤—Ö–æ–¥–∏—Ç|–≤–∫–ª—é—á–µ–Ω–æ|—Å–æ–¥–µ—Ä–∂–∏—Ç}',
  '–≤—Å—Ç—Ä–µ—á–∞/–ø—Ä–æ–≤–æ–¥—ã': '{–≤—Å—Ç—Ä–µ—á–∞/–ø—Ä–æ–≤–æ–¥—ã|—Ç—Ä–∞–Ω—Å—Ñ–µ—Ä –∏–∑/–≤ –∞—ç—Ä–æ–ø–æ—Ä—Ç|—Ç—Ä–∞–Ω—Å—Ñ–µ—Ä}',
  '–ø–∏—Ç–∞–Ω–∏–µ-–∑–∞–≤—Ç—Ä–∞–∫–∏': '{–ø–∏—Ç–∞–Ω–∏–µ-–∑–∞–≤—Ç—Ä–∞–∫–∏|–∑–∞–≤—Ç—Ä–∞–∫–∏|—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø–∏—Ç–∞–Ω–∏–µ}',
  '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è':
    '{–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è|–û—Ç–¥–µ–ª—å–Ω–æ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è|–ù–µ –≤–∫–ª—é—á–µ–Ω–æ –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å}',
  –û—Ä–≥–≤–∑–Ω–æ—Å: '{–û—Ä–≥–≤–∑–Ω–æ—Å|–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π –≤–∑–Ω–æ—Å|–í–∑–Ω–æ—Å –∑–∞ —É—á–∞—Å—Ç–∏–µ}',
  –ø–µ—Ä–µ–ª–µ—Ç: '{–ø–µ—Ä–µ–ª–µ—Ç|–∞–≤–∏–∞–±–∏–ª–µ—Ç—ã|–±–∏–ª–µ—Ç—ã –Ω–∞ —Å–∞–º–æ–ª—ë—Ç}',
  —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞: '{—Å—Ç—Ä–∞—Ö–æ–≤–∫–∞|–º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞}',
  –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞: '{–ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞|–∞–≤–∞–Ω—Å|–ø–µ—Ä–≤—ã–π –≤–∑–Ω–æ—Å}',
  '–æ—Å—Ç–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞':
    '{–æ—Å—Ç–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞|–æ—Å—Ç–∞—Ç–æ–∫ —Å—É–º–º—ã|–ø–æ–ª–Ω–∞—è –æ–ø–ª–∞—Ç–∞|–æ—Å—Ç–∞–≤—à–∞—è—Å—è —á–∞—Å—Ç—å}',

  // --- –≠–º–æ–¥–∑–∏/–°–∏–º–≤–æ–ª—ã (–º–æ–∂–Ω–æ —Ç–æ–∂–µ –≤–∫–ª—é—á–∏—Ç—å –¥–ª—è –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏) ---
  'üì¢': '{üì¢|üî•|üéâ|‚ùóÔ∏è}',
  '‚è≥': '{‚è≥|‚è±Ô∏è|‚ú®|üóìÔ∏è}',
  'ü™Ñ': '{ü™Ñ|üí•|üëç|‚úÖ}',
};

function spinSingleVariation(variationString: string): string {
  if (variationString.startsWith('{') && variationString.endsWith('}')) {
    const optionsString = variationString.slice(1, -1);
    const options = optionsString.split('|');
    if (options.length > 0) {
      return options[Math.floor(Math.random() * options.length)].trim();
    }
  }
  return variationString;
}

export function applyVariations(
  message: string,
  dictionary: { [key: string]: string },
): string {
  let result = message;

  const sortedKeys = Object.keys(dictionary).sort(
    (a, b) => b.length - a.length,
  );

  for (const key of sortedKeys) {
    const variationString = dictionary[key];
    const replacement = spinSingleVariation(variationString);

    const escapedKey = key.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ Regex
    const regex = new RegExp(escapedKey, 'g');

    result = result.replace(regex, replacement);
  }

  return result;
}
